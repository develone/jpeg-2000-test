sudo apt-get install gcc-arm-none-eabi

Created /home/pi/test_ultibo/RPi3/LibC
	test.c
	LibCTest.lpr

test.c

/*
 * test.c
 * 
 * A simple C library to include in your Ultibo project
 * 
 */
 
#include <stdio.h>

void test ()
{

   printf ("Hello Ultibo from C!!\n");
   
}

LibCTest.lpr

program LibCTest;

{$mode objfpc}{$H+}

uses
 RaspberryPi3,  
 GlobalConfig,
 GlobalConst,
 GlobalTypes,
 Platform,
 Threads,
 Console,
 Syscalls;

{$linklib test}

procedure test; cdecl; external 'libtest' name 'test';

var
 Handle:THandle;

begin
 Handle:=ConsoleWindowCreate(ConsoleDeviceGetDefault,CONSOLE_POSITION_FULL,True);

 test;
 
 ThreadHalt(0);
end.
		
arm-none-eabi-gcc -O2 -mabi=aapcs -marm -march=armv6 -mfpu=vfp -mfloat-abi=hard -c test.c

Creates test.o 

arm-none-eabi-ar rcs libtest.a test.o

Creates libtest.a

export PATH=/home/pi/ultibo/core/fpc/bin:$PATH 

fpc -B -Tultibo -Parm -CpARMV7A -WpRPI3B @/home/pi/ultibo/core/fpc/bin/rpi3.cfg -O2 LibCTest.lpr
Free Pascal Compiler version 3.1.1 [2017/01/03] for arm
Copyright (c) 1993-2015 by Florian Klaempfl and others
Target OS: Ultibo
Compiling LibCTest.lpr
LibCTest.lpr(20,2) Note: Local variable "Handle" is assigned but never used
Assembling libctest
Linking LibCTest
28 lines compiled, 3.7 sec, 2226164 bytes code, 85940 bytes data
1 note(s) issued
Creates LibCTest.o, LibCTest.elf, and  kernel7.img
